/*! tribe 0.2.3 */
!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof module&&module.exports?module.exports=b():a.tribe=b()}(this,function(){function a(a,c){a="string"==typeof a?{url:a}:a||{},a.headers=a.headers||{};var d=new XMLHttpRequest,e={xhr:d,req:a};b("req",e),(d=e.xhr).open(a.method||"GET",a.url||"/",!0,a.user,a.pass);for(var f in a.headers)h.call(a.headers,f)&&d.setRequestHeader(f,a.headers[f]);d.onreadystatechange=function(){if(4===d.readyState){var e,f={status:d.status,error:d.status>399?d.statusText:null,headers:{},body:d.responseText,xml:d.responseXML,xhr:d},g=/^\s*([a-z0-9_-]+)\s*\:\s*(.*?)\s*$/gim,h=d.getAllResponseHeaders();try{f.json=JSON.parse(f.body)}catch(i){}for(f.data=f.json||f.xml||f.body;e=g.exec(h);)f.headers[e[1].toLowerCase()]=e[2];i.res=f,b("res",i),(c||a.callback).call(i,f.error,f,f.data)}},d.send(a.body)}function b(b,c){c=Array.prototype.slice.call(arguments,1);for(var d=f[b],e=d.length;e--;)d[e].apply(a,c)}function c(b){return function(c,d){var f=e({},"string"==typeof c?{url:c}:c,b);return b.baseUrl&&(f.url=b.baseUrl+c.url),a(f,d)}}function d(a,b){for(var d=g.length;d--;)a[g[d].toLowerCase()]=c(e({},b||{},{method:g[d]}));return a.del=a["delete"],a.request=a}function e(a){for(var b,c,d=1;d<arguments.length;d++){c=arguments[d];for(b in c)h.call(c,b)&&(a[b]=c[b])}return a}var f={req:[],res:[]},g="GET POST PUT DELETE HEAD OPTIONS".split(" "),h={}.hasOwnProperty;return a.ns=function(b){var e={baseUrl:b},f=d(c(e),e);return f.on=function(c,d,e){return a.on(t,b+(d.sub?d:""),e||d),f},f},a.on=function(b,c,d){return f[b].push(d?function(a){(a.req.url===c||c.exec&&a.req.url.match(c))&&d.call(this,a)}:c),a},d(a),a.tribe=a,a});